<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>R语言数据分析简介</title>

	<meta name="description" content="A quick introduction for new R users">
	<meta name="author" content="Chen Yanping">
	<meta name="viewport" content="width=1024, user-scalable=no">

	<!-- Core and extension CSS files -->
	<link rel="stylesheet" href="core/deck.core.css">
	<link rel="stylesheet" href="extensions/goto/deck.goto.css">
	<link rel="stylesheet" href="extensions/menu/deck.menu.css">
	<link rel="stylesheet" href="extensions/navigation/deck.navigation.css">
	<link rel="stylesheet" href="extensions/status/deck.status.css">
	<link rel="stylesheet" href="extensions/hash/deck.hash.css">
	<link rel="stylesheet" href="themes/style/web-2.0.css">
	<link rel="stylesheet" href="themes/transition/fade.css">
	<script src="js/modernizr.custom.js"></script>
	<style type="text/css">
.knitr {
	background-color: #F7F7F7;
}
.error {
	font-weight: bold;
	color: #FF0000;
}
.warning {
	font-weight: bold;
}
.message {
	font-style: italic;
}
.source, .output, .warning, .error, .message {
	padding: 0.5em 1em;
}
.number{
	color: rgb(21,20,181) ;
}

.functioncall{
	color: rgb(32, 74, 147) ;
}

.string{
	color: rgb(78, 163, 113) ;

}

.keyword{
	font-weight: bolder ;
	color: black;
}

.argument{
	color: rgb( 177,63,5) ;
}

.comment{
	color: rgb(146, 89, 2) ;
}

.roxygencomment{
	color: rgb(0,151,255);
}

.formalargs{
	color: rgb(18,182,18);
}

.eqformalargs{
	color: rgb(18,182,18);
}

.assignement{
	font-weight: bolder;
	color: rgb(206, 92, 0);
}

.package{
	color: rgb(150,182,37);
}

.slot{
	font-style:italic;
}

.symbol{
	color: black ;
}

.prompt{
	color: black ;
}

</style>
</head>

<body class="deck-container">

<!-- =====
Slide Break
==== -->
	<section class="slide" id="intro">
		<div>
			<hgroup>
				<h1>R语言数据分析简介</h1>				
        <img src="images/cos-logo-png.png" alt="SupStat"/><a href="http://supstat.com">统计之都</a>
        <h3>陈堰平</h3>
				<h3>yanping.chen@cos.name</h3>
			</hgroup>
			<p><span style="color:#ccc">按M键查看所有幻灯片，按G键跳到特定幻灯片</span></p>
    </div>

	</section>

<!-- =====
Slide Break
==== -->



<section class="slide" id="gui_analysis_is_bad">
	<h2>Why R?</h2>
	<h3>老办法...</h3>
	<img src="images/old-way.png">
</section>

<!-- =====
Slide Break
==== -->

<section class="slide" id="R_is_better">
	<h2>Why R?</h2>
		<h3>更好的办法</h3><br><br>
<pre class="knitr"><div class="source"><span class="functioncall">glm</span><span class="keyword">(</span><span class="symbol">y</span> <span class="keyword">~</span> <span class="keyword">-</span><span class="number">1</span> <span class="keyword">+</span> <span class="symbol">a</span> <span class="keyword">+</span> <span class="symbol">c</span> <span class="keyword">+</span> <span class="symbol">z</span> <span class="keyword">+</span> <span class="symbol">a</span><span class="keyword">:</span><span class="symbol">z</span><span class="keyword">,</span> <span class="argument">data</span> <span class="argument">=</span> <span class="symbol">mydata</span><span class="keyword">,</span> <span class="argument">maxit</span> <span class="argument">=</span> <span class="number">30</span><span class="keyword">)</span>
</div></pre>
<br><br>
	<h3>这样做是<u>可重复性的</u></h3>
</section>


<!-- =====
Slide Break
==== -->

<section class="slide deck-current" id="rstudio">
	<h2>选择一个合适的代码编辑器</h2>
	<ol>
		<li>
			<h3>R Studio</h3>
			<img src="images/rstudio.png" alt="rstudio">
		</li>
	</ol>
</section>

<!-- =====
Slide Break
==== -->

<section class="slide deck-current" id="other-editors">
	<ol>
		<li>
			<h3>TinnR (Windows), Sublime Text (all), Text Wrangler (osx) etc.</h3>
			<p> 所有这些都可以绑定快捷键，选择一款你喜欢的就行。</p>
			<img src="images/st2.png" alt="I heart Sublime Text">
		</li>
	</ol>
</section>

<!-- =====
Slide Break
==== -->


<section class="slide" id="establish_workflows">
	<h2>工作流</h2><br><br>
	<h3>选择合适的工作流会使你的分析更流畅，而且可重复</h3>
</section>

<!-- =====
Slide Break
==== -->

<section class="slide" id="sample-workflow">
  <h2>工作流举例</h2><br><br>
<table cellspacing=100 cellpadding=100><tr><td>
<pre><strong>load.r</strong>
	<p>加载所有未经转换的原始数据</p>
</pre></td>
<td valign="center"><br>&nbsp;<strong>→</strong> &nbsp;</td>
<td>
<pre><strong>clean.r</strong>
<br><p>转换并清洗数据，处理缺失值</p>
</pre></td>
<td valign="center"><br>&nbsp;<strong>→</strong> &nbsp;</td>
<td>
<pre><strong>functions.r</strong>
<br><p>把原有函数都保存在一个文件中</p>
</pre></td>
<td valign="center"><br>&nbsp;<strong>→</strong> &nbsp;</td>
<td>
<pre><strong>do.r</strong>
<br><p>导入清洗过的数据，加载所有函数，做分析</p>
</pre></td>
</tr></table>
<br>
<pre class="knitr"><div class="source"><span class="comment"># File: do.r</span>
<span class="functioncall">source</span><span class="keyword">(</span><span class="string">"functions.r"</span><span class="keyword">)</span>
<span class="functioncall">load</span><span class="keyword">(</span><span class="string">"cleaned_data.rdata"</span><span class="keyword">)</span>
</div></pre>

</section>



<!-- =====
Slide Break
==== -->

<section class="slide" id="working-dir">
	<h2>工作流...</h2>
 <h3>在控制台中设置工作目录，而不要在脚本中设置</h3>
<pre class="knitr"><div class="source"><span class="comment"># My_script.r</span>
<span class="functioncall">setwd</span><span class="keyword">(</span><span class="string">"path/to/dir"</span><span class="keyword">)</span>
<span class="comment"># Removing any extra objects from my workspace (just in case)</span>
<span class="functioncall">rm</span><span class="keyword">(</span><span class="argument">list</span> <span class="argument">=</span> <span class="functioncall">ls</span><span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span>
<span class="comment"># Keeps my current file clutter free</span>
<span class="functioncall">source</span><span class="keyword">(</span><span class="string">"related_r_scripts.r"</span><span class="keyword">)</span>
</div></pre>

</section>
<!-- =====
Slide Break
==== -->

<section class="slide" id="be_explicit">
	<h2>工作流...</h2>

		<h3>不要绑定数据</h3>
<pre class="knitr"><div class="source"><strike><span class="functioncall">attach</span><span class="keyword">(</span><span class="symbol">mydata</span><span class="keyword">)</span></strike>
</div></pre>
		<br>

		<h3>坚持显式引用</h3>
	<pre class="knitr"><div class="source"><span class="symbol">mydata</span><span class="keyword">$</span><span class="symbol">column_name</span>
</div></pre>


</section>





<!-- =====
Slide Break
==== -->

<section class="slide" id="r-data-types">
	<h2>R数据结构概览</h2>
<pre class="knitr"><div class="source"><span class="comment"># <b>Vector</b>: (single dimension, all same type)</span>
<span class="symbol">vec1</span> <span class="assignement">&lt;-</span> <span class="number">1</span><span class="keyword">:</span><span class="number">10</span>
<span class="functioncall">class</span><span class="keyword">(</span><span class="symbol">vec1</span><span class="keyword">)</span>
</div><div class="output">## [1] "integer"
</div><div class="source"><span class="symbol">vec2</span> <span class="assignement">&lt;-</span> <span class="symbol">letters</span><span class="keyword">[</span><span class="number">1</span><span class="keyword">:</span><span class="number">10</span><span class="keyword">]</span>
<span class="functioncall">class</span><span class="keyword">(</span><span class="symbol">vec2</span><span class="keyword">)</span>
</div><div class="output">## [1] "character"
<span class="comment"># <b>Data Frame</b>: Each column is a vector, but adjacent vectors can hold different things</span>
<span class="comment"># <b>Matrix</b>: Just like a data.frame except it's all numeric</span>
<span class="comment"># <b>List</b>: (any dimension, mix and match)</span>
</div><div class="source"><span class="symbol">l1</span> <span class="assignement">&lt;-</span> <span class="functioncall">list</span><span class="keyword">(</span><span class="argument">A</span> <span class="argument">=</span> <span class="functioncall">data.frame</span><span class="keyword">(</span><span class="argument">x</span> <span class="argument">=</span> <span class="number">1</span><span class="keyword">:</span><span class="number">10</span><span class="keyword">,</span> <span class="argument">y</span> <span class="argument">=</span> <span class="functioncall">rnorm</span><span class="keyword">(</span><span class="number">10</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">,</span>
    <span class="argument">B</span> <span class="argument">=</span> <span class="number">1</span><span class="keyword">,</span> <span class="argument">C</span> <span class="argument">=</span> <span class="symbol">letters</span><span class="keyword">[</span><span class="number">1</span><span class="keyword">:</span><span class="number">3</span><span class="keyword">]</span><span class="keyword">)</span>
<span class="functioncall">str</span><span class="keyword">(</span><span class="symbol">l1</span><span class="keyword">)</span>
</div><div class="output">## List of 3
  $ A:'data.frame':	10 obs. of  2 variables:
   ..$ x: int [1:10] 1 2 3 4 5 6 7 8 9 10
   ..$ y: num [1:10] 0.618 0.519 0.343 0.428 -0.885 ...
  $ B: num 1
  $ C: chr [1:3] "a" "b" "c"
</div></pre>
</section>

<!-- =====
Slide Break
==== -->

<section class="slide" id="seeking-help">
	<h2>寻找帮助</h2>
	<h3>系统自带文档</h3>
	<pre><code>
		?function_name
		??function_name
		RSiteSearch("function_name")
	</code></pre>
	<h3>在线帮助</h3>
	<table width="100%">
  <tr>		
    <td align="left"><strong><a href="http://cos.name/cn/forum/15">统计之都</a></strong>
	<img src="images/cos-logo-png.png"></td>
	<td align="center"><strong><a href="http://rseek.org">Rseek</a></strong>
	<img src="images/rseek.png"></td>
  <tr><td align="left"><strong><a href="http://stackoverflow.com/questions/tagged/r">StackOverflow</a></strong>
	<img src="images/stack_overflow.png"></td></tr>
	</tr></table>
</section>

<!-- =====
Slide Break
==== -->

<section class="slide" id="session_info">
	<h2><code>sessionInfo()</code></h2>
<pre class="knitr"><div class="source"><span class="functioncall">sessionInfo</span><span class="keyword">(</span><span class="keyword">)</span>
</div><div class="output">## R version 3.0.1 (2013-05-16)
 Platform: i386-w64-mingw32/i386 (32-bit)

 locale:
[1] LC_COLLATE=Chinese_People's Republic of China.936 
[2] LC_CTYPE=Chinese_People's Republic of China.936   
[3] LC_MONETARY=Chinese_People's Republic of China.936
[4] LC_NUMERIC=C                                      
[5] LC_TIME=Chinese_People's Republic of China.936 

 attached base packages:
 [1] graphics  grDevices utils     datasets  stats     methods   base

 other attached packages:
 [1] knitr_0.3      formatR_0.3-4  devtools_0.6   plyr_1.7.1
 [5] reshape2_1.2.1 ggplot2_0.9.0

 loaded via a namespace (and not attached):
  [1] codetools_0.2-8    colorspace_1.1-1   dichromat_1.2-4
  [4] digest_0.5.1       evaluate_0.4.1     gdata_2.8.2
  [7] grid_2.14.2        gtools_2.6.2       highlight_0.3.1
 [10] MASS_7.3-17        memoise_0.1        munsell_0.3
 [13] parser_0.0-14      proto_0.3-9.2      RColorBrewer_1.0-5
 [16] Rcpp_0.9.10        RCurl_1.91-1       scales_0.2.0
 [19] stringr_0.6        tools_2.14.2
</div></pre>
</section>

<!-- =====
Slide Break
==== -->



<section class="slide" id="reading_data">
	<h2>读取数据</h2>
	<h3>从文本文件中读取</h3>
	<pre><code>read.table</pre></code>
	<h3>从数据库中读取</h3>
	<pre><code>Use packages RODBC, RMySQL</pre></code>
	<h3>从云中读取</h3>
	<pre><code>Amazon S3, Google Docs, Dropbox etc.</pre></code>

</section>

<!-- =====
Slide Break
==== -->

<section class="slide" id="saving_data">
	<h2>保存数据</h2>
	<strong>短期的</strong>
<pre class="knitr"><div class="source"><span class="functioncall">save</span><span class="keyword">(</span><span class="symbol">data</span><span class="keyword">,</span> <span class="argument">file</span> <span class="argument">=</span> <span class="string">"slots.rdata"</span><span class="keyword">)</span>
</div></pre>
<strong>长期的</strong>
<pre class="knitr"><div class="source"><span class="functioncall">write.table</span><span class="keyword">(</span><span class="symbol">data</span><span class="keyword">,</span> <span class="argument">file</span> <span class="argument">=</span> <span class="string">"slots-3.csv"</span><span class="keyword">,</span> <span class="argument">sep</span> <span class="argument">=</span> <span class="string">","</span><span class="keyword">,</span>
    <span class="argument">row</span> <span class="argument">=</span> <span class="symbol">F</span><span class="keyword">)</span>
</div></pre>
</section>


<!-- =====
Slide Break
==== -->


<section class="slide" id="repositories">
	<h2>使用版本控制工具，比如git</h2>
<img src='images/git.png' alt="Cover of Jon Loeliger's book">
</section>

<!-- =====
Slide Break
==== -->

<section class="slide" id="report-generation">
	<h2>生成动态报告</h2>
<img src="images/knitr.png">
<pre><code>
	<span class="comment"># As easy as:</span>
	knit('report.rnw')
	<br>
	<span class="comment"># All the syntax in this talk was generated using knitr</span>
</code></pre>
</section>

<!-- =====
Slide Break
==== -->

<section class="slide" id="r_cloud">
	<h2>云端的R</h2>
	<br>
	<h3>R在云平台上（比如AWS）能发挥很强大的功能</h3>
<img src="images/awslogo.png" alt="Amazon web services">
<br>
<h3>R可以跟有API的web服务做交互</h3>
</section>

<!-- =====
Slide Break
==== -->

<section class="slide" id="r_cloudb">
	<h2>用REST API调用R</h2>
<br><h3>opencpu.org</h3>
<img src="images/opencpu.png" alt="Open CPU">

</section>

<!-- =====
Slide Break
==== -->


<section class="slide" id="fin">
	<h1>Questions?</h1>
</section>

<!-- =====
END PRESENTATION
==== -->


<!-- deck.navigation snippet -->
<a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
<a href="#" class="deck-next-link" title="Next">&#8594;</a>

<!-- deck.status snippet -->
<p class="deck-status">
	<span class="deck-status-current"></span>
	/
	<span class="deck-status-total"></span>
</p>

<!-- deck.goto snippet -->
<form action="." method="get" class="goto-form">
	<label for="goto-slide">Go to slide:</label>
	<input type="text" name="slidenum" id="goto-slide" list="goto-datalist">
	<datalist id="goto-datalist"></datalist>
	<input type="submit" value="Go">
</form>

<!-- deck.hash snippet -->
<a href="." title="Permalink to this slide" class="deck-permalink">#</a>


<!-- Grab CDN jQuery, with a protocol relative URL; fall back to local if offline -->
<script src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
<script>window.jQuery || document.write('<script src="js/jquery-1.7.min.js"><\/script>')</script>

<!-- Deck Core and extensions -->
<script src="core/deck.core.js"></script>
<script src="extensions/hash/deck.hash.js"></script>
<script src="extensions/menu/deck.menu.js"></script>
<script src="extensions/goto/deck.goto.js"></script>
<script src="extensions/status/deck.status.js"></script>
<script src="extensions/navigation/deck.navigation.js"></script>

<!-- Initialize the deck -->
<script>
$(function() {
	$.deck('.slide');
});
</script>

</body>
</html>
